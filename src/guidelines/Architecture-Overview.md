# REX ì•„í‚¤í…ì²˜ ê°œìš”

## ì‹œìŠ¤í…œ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Frontend (React + Vite)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  UI Components (Blue Design System)                         â”‚
â”‚  â”œâ”€â”€ Dashboard (í†µí•© ëŒ€ì‹œë³´ë“œ)                              â”‚
â”‚  â”œâ”€â”€ Datasets (ë°ì´í„°ì…‹ ê´€ë¦¬)                               â”‚
â”‚  â”œâ”€â”€ Evaluations (í‰ê°€í•˜ê¸° - 2ê°œ ëª¨ë“œ)                     â”‚
â”‚  â”‚   â”œâ”€â”€ External Evaluation (ì—°ë™ëœ ì‹œìŠ¤í…œ í‰ê°€)           â”‚
â”‚  â”‚   â””â”€â”€ New Evaluation (ì‹ ê·œ í‰ê°€ - ì‹¤í—˜ ëª¨ë“œ)            â”‚
â”‚  â”œâ”€â”€ Monitoring, Results, Comparison                        â”‚
â”‚  â”œâ”€â”€ Auto-Improve, Costs, Admin, Logs                      â”‚
â”‚  â””â”€â”€ Login, Layout                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  State Management (Zustand)                                 â”‚
â”‚  â”œâ”€â”€ Evaluation Store (í‰ê°€ ì„¤ì • ê´€ë¦¬)                      â”‚
â”‚  â””â”€â”€ Monitor Store (ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  API Client Layer                                           â”‚
â”‚  â”œâ”€â”€ RESTful API Client (fetch wrapper)                    â”‚
â”‚  â”œâ”€â”€ WebSocket Client (ì‹¤ì‹œê°„ í†µì‹ )                         â”‚
â”‚  â””â”€â”€ Mock Data Handler (ê°œë°œìš©)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†•
                    HTTP / WebSocket
                            â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Backend API Server                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  API Gateway (Express / FastAPI)                            â”‚
â”‚  â”œâ”€â”€ Authentication (JWT)                                   â”‚
â”‚  â”œâ”€â”€ Rate Limiting                                          â”‚
â”‚  â””â”€â”€ CORS                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Business Logic Layer                                       â”‚
â”‚  â”œâ”€â”€ Dataset Management                                     â”‚
â”‚  â”œâ”€â”€ Evaluation Orchestration                              â”‚
â”‚  â”œâ”€â”€ Result Processing                                      â”‚
â”‚  â””â”€â”€ Auto-Improve Engine                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Job Queue (Celery / Bull)                                  â”‚
â”‚  â””â”€â”€ Async Task Processing                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Evaluation Engine                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  RAG Pipeline                                               â”‚
â”‚  â”œâ”€â”€ Document Retrieval (Vector DB)                        â”‚
â”‚  â”œâ”€â”€ LLM Generation                                         â”‚
â”‚  â””â”€â”€ Context Processing                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Metrics Calculation (12ê°œ ì§€í‘œ)                            â”‚
â”‚  â”œâ”€â”€ í•„ìˆ˜ ì§€í‘œ (6ê°œ) - ê¸°ë³¸ í™œì„±í™”                          â”‚
â”‚  â”‚   â”œâ”€â”€ Faithfulness (ì¶©ì‹¤ì„±)                             â”‚
â”‚  â”‚   â”œâ”€â”€ Answer Relevancy (ë‹µë³€ ê´€ë ¨ì„±)                    â”‚
â”‚  â”‚   â”œâ”€â”€ Context Precision (ì»¨í…ìŠ¤íŠ¸ ì •ë°€ë„)               â”‚
â”‚  â”‚   â”œâ”€â”€ Context Recall (ì»¨í…ìŠ¤íŠ¸ ì¬í˜„ìœ¨)                  â”‚
â”‚  â”‚   â”œâ”€â”€ Answer Correctness (ë‹µë³€ ì •í™•ì„±)                  â”‚
â”‚  â”‚   â””â”€â”€ Coherence (ì¼ê´€ì„±)                                â”‚
â”‚  â””â”€â”€ ì„ íƒ ì§€í‘œ (6ê°œ) - í•„ìš”ì‹œ í™œì„±í™”                        â”‚
â”‚      â”œâ”€â”€ Answer Similarity (ë‹µë³€ ìœ ì‚¬ë„)                   â”‚
â”‚      â”œâ”€â”€ Context Entity Recall (ì—”í‹°í‹° ì¬í˜„ìœ¨)             â”‚
â”‚      â”œâ”€â”€ Conciseness (ê°„ê²°ì„±)                              â”‚
â”‚      â”œâ”€â”€ Critique Correctness (ë¹„í‰ ì •í™•ì„±)                â”‚
â”‚      â”œâ”€â”€ Harmfulness (ìœ í•´ì„±)                              â”‚
â”‚      â””â”€â”€ Maliciousness (ì•…ì˜ì„±)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Data Layer                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  PostgreSQL (ë©”ì¸ DB)                                       â”‚
â”‚  â”œâ”€â”€ users, datasets, qa_pairs                             â”‚
â”‚  â”œâ”€â”€ evaluation_configs, evaluation_results                â”‚
â”‚  â”œâ”€â”€ failed_cases, logs                                     â”‚
â”‚  â””â”€â”€ auto_improve_jobs, experiments                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Vector DB (Pinecone / ChromaDB / Weaviate)                â”‚
â”‚  â””â”€â”€ Document Embeddings                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Redis (Cache & Session)                                    â”‚
â”‚  â”œâ”€â”€ API Rate Limiting                                      â”‚
â”‚  â”œâ”€â”€ Session Storage                                        â”‚
â”‚  â””â”€â”€ Real-time Status Cache                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## í”„ë¡ íŠ¸ì—”ë“œ ì•„í‚¤í…ì²˜

### ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
/
â”œâ”€â”€ components/                   # React ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ *PageBlue.tsx            # ê° í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ (Blue ë””ìì¸)
â”‚   â”œâ”€â”€ AppLayout.tsx            # ë ˆì´ì•„ì›ƒ (ì‚¬ì´ë“œë°” + í—¤ë” + ë„¤ë¹„ê²Œì´ì…˜)
â”‚   â”œâ”€â”€ EvaluationModeSelectionPage.tsx  # í‰ê°€ ëª¨ë“œ ì„ íƒ (2ê°œ ëª¨ë“œ)
â”‚   â”œâ”€â”€ ExternalEvaluationPageBlue.tsx   # ì—°ë™ëœ ì‹œìŠ¤í…œ í‰ê°€
â”‚   â”œâ”€â”€ NewEvaluationPageBlue.tsx        # ì‹ ê·œ í‰ê°€ (ì‹¤í—˜ ëª¨ë“œ)
â”‚   â”œâ”€â”€ LoginPage.tsx            # ë¡œê·¸ì¸ í˜ì´ì§€
â”‚   â”œâ”€â”€ ui/                      # shadcn/ui ì»´í¬ë„ŒíŠ¸
â”‚   â””â”€â”€ figma/                   # Figma ì „ìš© ì»´í¬ë„ŒíŠ¸
â”‚
â”œâ”€â”€ stores/                       # Zustand ìƒíƒœ ê´€ë¦¬
â”‚   â”œâ”€â”€ evaluation-store.ts      # í‰ê°€ ì„¤ì • ê´€ë¦¬
â”‚   â””â”€â”€ monitor-store.ts         # ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ ê´€ë¦¬
â”‚
â”œâ”€â”€ lib/                          # ìœ í‹¸ë¦¬í‹° & ë°ì´í„°
â”‚   â”œâ”€â”€ api-client.ts            # API í†µì‹  ë ˆì´ì–´
â”‚   â””â”€â”€ mock-data.ts             # Mock ë°ì´í„° (ê°œë°œìš©)
â”‚
â”œâ”€â”€ types/                        # TypeScript íƒ€ì… ì •ì˜
â”‚   â””â”€â”€ index.ts                 # ëª¨ë“  íƒ€ì… ì •ì˜
â”‚
â”œâ”€â”€ styles/                       # ìŠ¤íƒ€ì¼
â”‚   â””â”€â”€ globals.css              # ì „ì—­ CSS + Tailwind
â”‚
â”œâ”€â”€ guidelines/                   # ë¬¸ì„œ
â”‚   â”œâ”€â”€ API-Specification.md     # API ëª…ì„¸ì„œ
â”‚   â”œâ”€â”€ Frontend-Integration-Guide.md
â”‚   â””â”€â”€ Architecture-Overview.md (this file)
â”‚
â”œâ”€â”€ App.tsx                       # ë©”ì¸ ì•± ì»´í¬ë„ŒíŠ¸
â””â”€â”€ .env.example                  # í™˜ê²½ ë³€ìˆ˜ ì˜ˆì‹œ
```

### ë°ì´í„° íë¦„

```
User Action â†’ Component â†’ Store (Zustand)
                            â†“
                    API Client Layer
                            â†“
                    Backend API
                            â†“
                    Response â†’ Store â†’ Component â†’ UI Update
```

---

## ìƒíƒœ ê´€ë¦¬ ì „ëµ

### 1. Evaluation Store

**ëª©ì :** í‰ê°€ ìƒì„± ì‹œ ì‚¬ìš©ìê°€ ì…ë ¥í•˜ëŠ” ëª¨ë“  ì„¤ì •ì„ ê´€ë¦¬

**ê´€ë¦¬í•˜ëŠ” ë°ì´í„°:**

- ë°ì´í„°ì…‹ ì„ íƒ
- LLM ëª¨ë¸ ì„ íƒ
- Vector DB ì„ íƒ
- í‰ê°€ ì§€í‘œ ì„¤ì • (12ê°œ)
- ìŠ¤ì¼€ì¤„ ì„¤ì •

**ì£¼ìš” ê¸°ëŠ¥:**

- `setDataset()` - ë°ì´í„°ì…‹ ì„ íƒ
- `toggleMetric()` - ì§€í‘œ í™œì„±í™”/ë¹„í™œì„±í™”
- `getCurrentRequest()` - API ìš”ì²­ ê°ì²´ ìƒì„±
- `isConfigValid()` - ìœ íš¨ì„± ê²€ì‚¬
- `resetConfig()` - ì„¤ì • ì´ˆê¸°í™”

### 2. Monitor Store

**ëª©ì :** ì‹¤í–‰ ì¤‘ì¸ í‰ê°€ë“¤ì˜ ìƒíƒœë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì¶”ì 

**ê´€ë¦¬í•˜ëŠ” ë°ì´í„°:**

- í™œì„± í‰ê°€ ëª©ë¡
- ê° í‰ê°€ì˜ ì§„í–‰ë¥  (0-100%)
- ì‹¤ì‹œê°„ ë¡œê·¸ ë©”ì‹œì§€
- WebSocket ì—°ê²° ìƒíƒœ

**ì£¼ìš” ê¸°ëŠ¥:**

- `addEvaluation()` - ìƒˆ í‰ê°€ ì¶”ê°€
- `updateEvaluationStatus()` - ìƒíƒœ ì—…ë°ì´íŠ¸
- `connectWebSocket()` - ì‹¤ì‹œê°„ ì—°ê²°
- `startPolling()` - Polling ì‹œì‘ (WebSocket ëŒ€ì•ˆ)

---

## API í†µì‹  íŒ¨í„´

### 1. RESTful API (ê¸°ë³¸)

```typescript
// GET ìš”ì²­ (ëª©ë¡ ì¡°íšŒ)
const response = await api.datasets.list({
  page: 1,
  limit: 20,
});

// POST ìš”ì²­ (ìƒì„±)
const response = await api.evaluations.create(request);

// DELETE ìš”ì²­ (ì‚­ì œ)
const response = await api.datasets.delete(id);
```

### 2. Polling (ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ ëŒ€ì•ˆ)

```typescript
// 3ì´ˆë§ˆë‹¤ ìƒíƒœ ì¡°íšŒ
setInterval(async () => {
  const response = await api.evaluations.getStatus(id);
  // UI ì—…ë°ì´íŠ¸
}, 3000);
```

### 3. WebSocket (ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ - ê¶Œì¥)

```typescript
const ws = new EvaluationWebSocket(evaluationId, token);

ws.connect((message) => {
  // ì‹¤ì‹œê°„ ë©”ì‹œì§€ ìˆ˜ì‹ 
  if (message.type === "progress_update") {
    // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
  }
});
```

---

## ë¹„ë™ê¸° ì²˜ë¦¬ íë¦„

### í‰ê°€ ì‹¤í–‰ í”„ë¡œì„¸ìŠ¤

**ì›Œí¬í”Œë¡œìš° ìˆœì„œ:**

```
1. ë°ì´í„°ì…‹ ì¤€ë¹„ (Datasets í˜ì´ì§€)
   â””â”€> ë°ì´í„°ì…‹ ìƒì„±/ì—…ë¡œë“œ ë˜ëŠ” ê¸°ì¡´ ë°ì´í„°ì…‹ ì„ íƒ

2. í‰ê°€ ëª¨ë“œ ì„ íƒ (Evaluation Mode Selection)
   â”œâ”€> ì—°ë™ëœ ì‹œìŠ¤í…œ í‰ê°€: ê¸°ì¡´ ìš´ì˜ ì¤‘ì¸ RAG ì‹œìŠ¤í…œ í‰ê°€
   â””â”€> ì‹ ê·œ í‰ê°€: REX ë‚´ë¶€ RAG íŒŒì´í”„ë¼ì¸ ì‹¤í—˜ ëª¨ë“œ

3. í‰ê°€ ì„¤ì •
   â””â”€> Frontend: Evaluation Store ê²€ì¦
       â””â”€> ë°ì´í„°ì…‹, ëª¨ë¸, Vector DB, ì§€í‘œ ì„ íƒ

4. API ìš”ì²­ ì „ì†¡
   â””â”€> POST /api/v1/evaluations
       â””â”€> Response: { id, job_id, status: "pending" }

5. ë°±ì—”ë“œ: Job Queueì— ì‘ì—… ë“±ë¡
   â””â”€> Job Status: "pending" â†’ "running"

6. Frontend: ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ ì‹œì‘
   â”œâ”€> Option A: WebSocket ì—°ê²°
   â”‚   â””â”€> ë°±ì—”ë“œê°€ ì‹¤ì‹œê°„ìœ¼ë¡œ progress í‘¸ì‹œ
   â”‚
   â””â”€> Option B: Polling (3ì´ˆë§ˆë‹¤)
       â””â”€> GET /api/v1/evaluations/{id}/status

7. ë°±ì—”ë“œ: Evaluation Engine ì‹¤í–‰
   â”œâ”€> Vector DBì—ì„œ ë¬¸ì„œ ê²€ìƒ‰
   â”œâ”€> LLMìœ¼ë¡œ ë‹µë³€ ìƒì„±
   â”œâ”€> 12ê°œ ì§€í‘œ ê³„ì‚°
   â””â”€> ê²°ê³¼ë¥¼ DBì— ì €ì¥

8. ì™„ë£Œ ì‹œ
   â””â”€> Status: "completed"
       â””â”€> Frontend: ê²°ê³¼ í˜ì´ì§€ë¡œ ì´ë™
```

**ë„¤ë¹„ê²Œì´ì…˜ ë©”ë‰´ êµ¬ì¡°:**

```
1. í†µí•© ëŒ€ì‹œë³´ë“œ (Dashboard)
   â””â”€> ë¹ ë¥¸ ì‹¤í–‰: "ë°ì´í„°ì…‹ ìƒì„±" | "í‰ê°€ ì‹œì‘í•˜ê¸°"

2. ë°ì´í„°ì…‹ ê´€ë¦¬ (Datasets) â† í‰ê°€í•˜ê¸° ì „ ì„ í–‰ ë‹¨ê³„
   â””â”€> ë°ì´í„°ì…‹ ìƒì„±/ì—…ë¡œë“œ

3. í‰ê°€í•˜ê¸° (Evaluation Mode Selection)
   â”œâ”€> ì—°ë™ëœ ì‹œìŠ¤í…œ í‰ê°€ (External Evaluation)
   â””â”€> ì‹ ê·œ í‰ê°€ (New Evaluation)

4. í‰ê°€ ëª¨ë‹ˆí„°ë§ (Monitoring)
5. í‰ê°€ ì´ë ¥ (History)
6. ê²°ê³¼ ë¹„êµ (Comparison)
7. ìë™ ê°œì„  (Auto-Improve)
8. ë¹„ìš© ëŒ€ì‹œë³´ë“œ (Costs)
```

---

## ë³´ì•ˆ & ì¸ì¦

### JWT í† í° ê¸°ë°˜ ì¸ì¦

```typescript
// 1. ë¡œê·¸ì¸
const response = await authApi.login(email, password);
const token = response.data.token;

// 2. í† í° ì €ì¥
authApi.setToken(token);
localStorage.setItem("auth_token", token);

// 3. ì´í›„ ëª¨ë“  API ìš”ì²­ì— ìë™ìœ¼ë¡œ í¬í•¨
// Authorization: Bearer {token}

// 4. ë¡œê·¸ì•„ì›ƒ
authApi.clearToken();
localStorage.removeItem("auth_token");
```

### CORS ì„¤ì • (ë°±ì—”ë“œ)

```
Access-Control-Allow-Origin: https://rex.com
Access-Control-Allow-Methods: GET, POST, PUT, DELETE
Access-Control-Allow-Headers: Authorization, Content-Type
```

---

## ì„±ëŠ¥ ìµœì í™”

### 1. í”„ë¡ íŠ¸ì—”ë“œ ìµœì í™”

- **Code Splitting:** React.lazyë¥¼ ì‚¬ìš©í•œ í˜ì´ì§€ë³„ ë¶„í•  ë¡œë”©
- **Zustand Selectors:** í•„ìš”í•œ ìƒíƒœë§Œ ì„ íƒì ìœ¼ë¡œ êµ¬ë…
- **Debouncing:** ì…ë ¥ í•„ë“œì—ì„œ API í˜¸ì¶œ ë¹ˆë„ ì œí•œ
- **Memoization:** React.memo, useMemo ì‚¬ìš©

### 2. ë°±ì—”ë“œ ìµœì í™”

- **Job Queue:** ë¹„ë™ê¸° ì²˜ë¦¬ë¡œ API ì‘ë‹µ ì†ë„ í–¥ìƒ
- **Redis Cache:** ìì£¼ ì¡°íšŒë˜ëŠ” ë°ì´í„° ìºì‹±
- **DB Indexing:** ê²€ìƒ‰ ì„±ëŠ¥ í–¥ìƒ
- **Connection Pooling:** DB ì—°ê²° íš¨ìœ¨í™”

### 3. ë„¤íŠ¸ì›Œí¬ ìµœì í™”

- **Pagination:** ëŒ€ëŸ‰ ë°ì´í„° ë¶„í•  ì „ì†¡
- **Compression:** Gzip ì••ì¶•
- **CDN:** ì •ì  íŒŒì¼ ìºì‹±
- **HTTP/2:** ë©€í‹°í”Œë ‰ì‹± ì§€ì›

---

## í™•ì¥ì„± ê³ ë ¤ì‚¬í•­

### Horizontal Scaling

- **API Server:** ë¡œë“œ ë°¸ëŸ°ì„œ + ë‹¤ì¤‘ ì¸ìŠ¤í„´ìŠ¤
- **Job Workers:** Celery worker ì¶”ê°€
- **Database:** Read Replica, Sharding
- **Vector DB:** í´ëŸ¬ìŠ¤í„° ëª¨ë“œ

### Feature Flags

```env
VITE_ENABLE_WEBSOCKET=true
VITE_ENABLE_AUTO_IMPROVE=true
VITE_ENABLE_CUSTOM_METRICS=true
```

### Monitoring & Logging

- **Frontend:** Sentry (ì—ëŸ¬ ì¶”ì )
- **Backend:** ELK Stack (ë¡œê·¸ ìˆ˜ì§‘/ë¶„ì„)
- **Infrastructure:** Prometheus + Grafana (ë©”ï¿½ï¿½ï¿½ë¦­)

---

## ê°œë°œ ì›Œí¬í”Œë¡œìš°

### 1. ë¡œì»¬ ê°œë°œ

```bash
# 1. Mock ë°ì´í„° ì‚¬ìš©
VITE_USE_MOCK_DATA=true npm run dev

# 2. UI ê°œë°œ ë° í…ŒìŠ¤íŠ¸
# ëª¨ë“  ë°ì´í„°ëŠ” /lib/mock-data.tsì—ì„œ ì œê³µ

# 3. API ì—°ë™ ì¤€ë¹„ ì™„ë£Œ ì‹œ
VITE_USE_MOCK_DATA=false npm run dev
```

### 2. ë°±ì—”ë“œ ì—°ë™

```bash
# 1. ë°±ì—”ë“œ API ì„œë²„ ì‹¤í–‰
# 2. .env ì„¤ì •
VITE_API_BASE_URL=http://localhost:8000/api/v1
VITE_USE_MOCK_DATA=false

# 3. í”„ë¡ íŠ¸ì—”ë“œ ì‹¤í–‰
npm run dev
```

### 3. í”„ë¡œë•ì…˜ ë°°í¬

```bash
# 1. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
VITE_API_BASE_URL=https://api.rex.com/api/v1
VITE_USE_MOCK_DATA=false

# 2. ë¹Œë“œ
npm run build

# 3. ë°°í¬
# dist/ í´ë”ë¥¼ ì›¹ ì„œë²„ì— ë°°í¬
```

---

## íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### CORS ì—ëŸ¬

```javascript
// ë°±ì—”ë“œ ì„¤ì • í™•ì¸
app.use(cors({
  origin: 'https://rex.com',
  credentials: true
}));
```

### WebSocket ì—°ê²° ì‹¤íŒ¨

```javascript
// Fallback to Polling
if (!ws.connected) {
  startPolling();
}
```

### Rate Limit ì´ˆê³¼

```javascript
// Response Headers í™•ì¸
console.log(response.headers['X-RateLimit-Remaining']);

// Retry with exponential backoff
```

---

## Phaseë³„ ê¸°ëŠ¥ êµ¬í˜„ ë¡œë“œë§µ

### Phase 1: External SaaS Mode (í˜„ì¬)

âœ… **êµ¬í˜„ ì™„ë£Œëœ ê¸°ëŠ¥**

- ë°ì´í„°ì…‹ ê´€ë¦¬ UI
- External í‰ê°€ ì„¤ì • UI
- 12ê°œ ì§€í‘œ ì„ íƒ UI (í•„ìˆ˜ 6ê°œ + ì„ íƒ 6ê°œ)
- LLM Judge ìƒ˜í”Œë§ ì„¤ì • UI
- í‰ê°€ ê²°ê³¼ ì‹œê°í™”
- ê²°ê³¼ ë¹„êµ ê¸°ëŠ¥

ğŸš§ **ë°±ì—”ë“œ êµ¬í˜„ í•„ìš”**

1. **í‰ê°€ ì‹¤í–‰ ì—”ì§„**
   - POST /api/evaluations/external
   - WebSocket /ws/evaluations/:id
   - 12ê°œ ì§€í‘œ ê³„ì‚° ë¡œì§
   - LLM Judge ìƒ˜í”Œë§ (íœ´ë¦¬ìŠ¤í‹± + ê³ ì •ë¹„ìœ¨)

2. **ë°ì´í„°ì…‹ ìƒì„±**
   - POST /api/datasets/generate
   - LLM ê¸°ë°˜ QA ìƒì„±

3. **ê²°ê³¼ ì €ì¥ ë° ì¡°íšŒ**
   - GET /api/evaluations/:id/results
   - GET /api/evaluations/compare

âŒ **Phase 1ì—ì„œ êµ¬í˜„í•˜ì§€ ì•Šì„ ê¸°ëŠ¥**

- LLM Judge ê¸°ë°˜ ê·¼ë³¸ ì›ì¸ ë¶„ì„ (Phase 3)
- ìë™ ê°œì„  ì œì•ˆ ë° ì¬í‰ê°€ (Phase 3)
- Vector DB ì—°ë™ (Phase 2)
- Internal í‰ê°€ ëª¨ë“œ (Phase 2)

### Phase 2: Internal BMT Mode

- Vector DB í†µí•© (Pinecone, Weaviate, Milvus)
- REX ë‚´ë¶€ RAG íŒŒì´í”„ë¼ì¸ ì‹¤í–‰
- í•˜ì´í¼íŒŒë¼ë¯¸í„° ì¡°í•© ì‹¤í—˜
- ìµœì  ì„¤ì • ìë™ ë°œê²¬

### Phase 3: Auto-Improve & Advanced Features

- **LLM Judge ê¸°ë°˜ ê·¼ë³¸ ì›ì¸ ë¶„ì„**
  - POST /api/evaluations/:id/root-cause-analysis
  - ì‹¤íŒ¨ ì¼€ì´ìŠ¤ Root Cause ë¶„ë¥˜ (Retrieval vs Generation)
  - ResultsPageBlue.tsxì˜ "ì˜¤ë¥˜ ë¶„ì„" ì„¹ì…˜ í™œì„±í™”

- **AI ê¸°ë°˜ ê°œì„  ì œì•ˆ**
  - POST /api/evaluations/:id/improvement-suggestions
  - ê²€ìƒ‰/ìƒì„± ì˜¤ë¥˜ë³„ íŒŒë¼ë¯¸í„° ìµœì í™” ì œì•ˆ
  - ResultsPageBlue.tsxì˜ "ê°œì„  ì œì•ˆ ë° ì‹¤í—˜" ì„¹ì…˜ í™œì„±í™”

- **ìë™ ì¬í‰ê°€**
  - POST /api/auto-improve
  - ì œì•ˆëœ ì„¤ì • ìë™ ì ìš© ë° ì¬í‰ê°€

- **ë¹„ìš© ëŒ€ì‹œë³´ë“œ**
- **ì»¤ìŠ¤í…€ ì§€í‘œ ìƒì„±**
- **ë°˜ë³µ í‰ê°€ ì˜ˆì•½**

---

## ë‹¤ìŒ ë‹¨ê³„

### Phase 1 ì™„ë£Œë¥¼ ìœ„í•œ ë°±ì—”ë“œ ê°œë°œ ìš°ì„ ìˆœìœ„

1. **í‰ê°€ ì‹¤í–‰ ì—”ì§„** â­ ìµœìš°ì„ 
   - External API í˜¸ì¶œ ë° ê²°ê³¼ ìˆ˜ì§‘
   - 12ê°œ ì§€í‘œ ê³„ì‚° ë¡œì§
   - LLM Judge ìƒ˜í”Œë§ (90% ë¹„ìš© ì ˆê°)
   - WebSocket ì‹¤ì‹œê°„ ì§„í–‰ ìƒí™© ì „ì†¡

2. **ë°ì´í„°ì…‹ ê´€ë¦¬**
   - LLM ê¸°ë°˜ QA ìë™ ìƒì„±
   - íŒŒì¼ ì—…ë¡œë“œ ë° íŒŒì‹±

3. **ê²°ê³¼ ì €ì¥ ë° ì¡°íšŒ**
   - í‰ê°€ ì´ë ¥ ê´€ë¦¬
   - ê²°ê³¼ ë¹„êµ API

4. **ì˜ˆì•½ ì‹¤í–‰**
   - ìŠ¤ì¼€ì¤„ëŸ¬ êµ¬í˜„ (Cron ê¸°ë°˜)

---

## ì°¸ê³  ë¬¸ì„œ

- [API ëª…ì„¸ì„œ](./API-Specification.md)
- [í”„ë¡ íŠ¸ì—”ë“œ í†µí•© ê°€ì´ë“œ](./Frontend-Integration-Guide.md)
- [Guidelines](./Guidelines.md)